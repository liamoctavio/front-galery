<div class="upload-container fade-in">
  
  <div class="upload-card">
    
    <div class="image-section" 
         [class.drag-active]="isDragging"
         (dragover)="onDragOver($event)" 
         (dragleave)="onDragLeave($event)"
         (drop)="onDrop($event)">
      
      <input type="file" #fileInput (change)="onFileSelected($event)" accept="image/*" hidden>

      <div *ngIf="!previewUrl" class="upload-placeholder" (click)="fileInput.click()">
        <div class="icon-circle">
          <i class="bi bi-cloud-arrow-up-fill"></i>
        </div>
        <h3>Sube tu obra maestra</h3>
        <p>Arrastra tu imagen aquí o haz clic para buscar</p>
        <span class="file-info">Soporta JPG, PNG (Max 5MB)</span>
      </div>

      <div *ngIf="previewUrl" class="preview-container">
        <img [src]="previewUrl" class="preview-image" alt="Vista previa">
        
        <button class="btn-remove-image" (click)="removerImagen()" title="Cambiar imagen">
          <i class="bi bi-x-lg"></i>
        </button>
        
        <div class="preview-badge">
          <i class="bi bi-image"></i> Vista Previa
        </div>
      </div>

    </div>

    <div class="form-section">
      <div class="form-header">
        <h2>Detalles de la Obra</h2>
        <p>Cuenta la historia detrás del arte</p>
      </div>

      <div class="form-group">
        <label for="titulo">Título de la obra</label>
        <input type="text" id="titulo" 
               [(ngModel)]="nuevaObra.titulo" 
               class="modern-input" 
               placeholder="Ej. Atardecer en el Sena">
      </div>

      <div class="form-group">
        <label for="desc">Descripción / Historia</label>
        <textarea id="desc" 
                  [(ngModel)]="nuevaObra.descripcion" 
                  class="modern-textarea" 
                  rows="5" 
                  placeholder="¿Qué te inspiró a crear esto?"></textarea>
      </div>

      <div *ngIf="mensajeError" class="error-banner">
        <i class="bi bi-exclamation-circle-fill"></i> {{ mensajeError }}
      </div>

      <div class="form-actions">
        <button routerLink="/obras" class="btn-cancel">Cancelar</button>
        
        <button (click)="guardar()" 
                [disabled]="loading || !previewUrl || !nuevaObra.titulo" 
                class="btn-publish">
          <span *ngIf="!loading">
            <i class="bi bi-palette2"></i> Publicar Obra
          </span>
          <span *ngIf="loading" class="loading-state">
            <div class="spinner-tiny"></div> Subiendo...
          </span>
        </button>
      </div>

    </div>
  </div>
</div>